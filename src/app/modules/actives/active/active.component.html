<div>
  <h1 class="text-gray-500 text-2xl mb-3">
    <span>Novo ativo</span>
  </h1>
  <p-card>
    <form *ngIf="activeForm" [formGroup]="activeForm">
      <div class="columns-2">
        <div class="flex flex-col mb-3">
          <label htmlFor="category" class="mb-1">Categoria</label>
          <p-dropdown
            formControlName="category"
            [options]="optionsCategory"
            optionLabel="label"
          ></p-dropdown>
        </div>

        <div
          class="flex flex-col mb-3"
          *ngIf="
            activeForm.get('category')?.value?.value != categoryEnum.RENDA_FIXA
          "
        >
          <label htmlFor="name" class="mb-1">Nome</label>
          <p-autoComplete
            formControlName="name"
            [suggestions]="filteredNames"
          ></p-autoComplete>
        </div>
        <app-input-text
          *ngIf="
            activeForm.get('category')?.value?.value == categoryEnum.RENDA_FIXA
          "
          [form]="activeForm"
          label="Nome"
          type="text"
          controlName="name"
        />
      </div>
      <div
        class="max-w-[50%]"
        *ngIf="
          activeForm.get('category')?.value?.value != categoryEnum.RENDA_FIXA
        "
      >
        <app-input-text
          [form]="activeForm"
          label="Quantidade"
          type="number"
          controlName="amount"
        />
      </div>

      <div
        class="columns-2"
        *ngIf="
          activeForm.get('category')?.value?.value == categoryEnum.RENDA_FIXA
        "
      >
        <div class="flex flex-col mb-3">
          <label htmlFor="currentValue" class="mb-1">Valor Atual</label>

          <p-inputNumber
            formControlName="currentValue"
            inputId="currentValue"
            mode="currency"
            currency="BRL"
            locale="pt-BR"
          >
          </p-inputNumber>
        </div>

        <app-input-text
          [form]="activeForm"
          label="Nota"
          type="number"
          controlName="note"
        />
      </div>
    </form>
  </p-card>

  <ng-container
    *ngIf="
      activeForm.get('category')?.value?.value != categoryEnum.RENDA_FIXA &&
      activeForm.get('category')?.value?.value != categoryEnum.CRIPTOMOEDA
    "
  >
    <h1 class="text-gray-500 text-2xl mb-3 mt-5">
      <span>Perguntas</span>
    </h1>
    <p-card>
      <p-table [value]="questions">
        <ng-template pTemplate="header">
          <tr>
            <th>Pergunta</th>
            <th>Crit√©rio</th>
            <th>Resposta</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-question let-i="rowIndex">
          <tr>
            <td>
              {{ question.question }}
            </td>
            <td>
              {{ question.criterion }}
            </td>
            <td>
              <p-inputSwitch [(ngModel)]="question.response"></p-inputSwitch>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </ng-container>

  <div class="w-1/3">
    <p-button
      type="submit"
      label="Salvar"
      class="mt-3 w-full"
      [disabled]="activeForm.invalid"
      (onClick)="handleSubmit()"
    ></p-button>
  </div>
</div>
